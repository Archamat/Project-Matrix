/* ==========================================================
   CSS for Project GUI.
   ========================================================== */
:root {
  --card-border-w: 1px;
  --radius: 12px;
  --radius-inner: 8px;
  --header-h: 64px;
  --on-accent: #fff;
}


/* === Page Header === */
.page-header {
  width: 100%;
  padding: 0.75rem 1.25rem;
  background: var(--panel);
  border: var(--card-border-w) solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 0.5rem;
  color: var(--text);
}


.project-title {
  margin: 0;
  font-weight: 700;
  font-size: clamp(1.4rem, 3vw, 2.2rem);
  /* inherits color */
}


/* === 3-Column Grid ===
   Left = Notes/Links, Middle = Progress + Chat, Right = To-Do */
.work-grid {
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  gap: 1rem;
  padding: 0.75rem 1.25rem;
  background: transparent;
  border: 0;
  box-shadow: none;
  margin-bottom: 0.5rem;
}

/* === Columns === */

/* Middle column stacks progress + chat */
.center-rail {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* === Generic Card Look === */
:is(.card, .progress-card, .chat-box, .todo-box) {
  background: var(--card-bg);
  border: var(--card-border-w) solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}


/* === Left Rail === */
:is(.notes-card, .links-card) .card-head {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid var(--border-soft);
}


:is(.notes-card, .links-card) .card-head-h1 {
  margin: 0;
  font-size: 1.05rem;
  font-weight: 700;
  color: var(--text)
}


:is(.notes-card, .links-card) .card-body {
  padding: 0.9rem 1rem;
}


.notes-area {
  width: 100%;
  min-height: 180px;
  resize: vertical;
  border-radius: var(--radius-inner);
  padding: 0.65rem 0.8rem;
  background: var(--card-bg);
  color: var(--text);
}


/* Related links */
.links-list {
  margin: 0;
  padding-left: 1.1rem;
}


.links-list li { margin: 0.35rem 0; word-break: break-word; }
.links-list a { color: var(--brand); text-decoration: none; }
.links-list a:hover { text-decoration: underline; }


.link-adder {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 0.5rem;
}


.link-adder input {
  border: 1px solid var(--border);
  border-radius: var(--radius-inner);
  padding: 0.5rem 0.65rem;
  background: var(--card-bg);
  color: var(--text);
}


/* === Middle Column === */
/* Progress bar */
.progress-card {
  display: grid;
  grid-template-columns: auto 1fr auto;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
}


.progress-label { font-weight: 600; color: var(--text); white-space: nowrap; }
.progress-text { min-width: 3.5rem; text-align: right; font-weight: 700; color: var(--text); }
.progress-track {
  position: relative;
  height: 0.75rem;
  border-radius: 0.5rem;
  background: var(--border-soft);
  border: 1px solid var(--border);
  overflow: hidden;
}


.progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, var(--brand), var(--brand-200));
  transition: width 0.25s ease;
}


/* Chat box */
.chat-box {
  display: flex;
  flex-direction: column;
  height: 80vh;
  overflow: hidden;
}


.chat-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0.9rem 1.1rem;
  background: linear-gradient(90deg, var(--brand), var(--brand-2));
  color: var(--text);
}


.chat-header h1 { margin: 0; }


.chat-stream {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
  background: var(--bg);
  border-top: 1px solid var(--border-soft);
  border-bottom: 1px solid var(--border-soft);
}


.chat-msg {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-inner);
  padding: 0.7rem 0.8rem;
  margin-bottom: 0.65rem;
  box-shadow: none;
  line-height: 1;
  white-space: pre-wrap;      /* preserve user newlines within the message */
  overflow-wrap: anywhere;    /* break long URLs/words */
  word-break: break-word;
}


.chat-meta {
  display: block;
  margin: 0 0 .25rem;         /* no top margin, small bottom gap */
  padding: 0;
}


/* Author name (username / ID) */
.chat-meta strong {
  font-weight: 800;
  color: var(--text);     /* main readable color */
}


/* Timestamp */
.chat-meta span {
  font-size: 0.8rem;
  color: var(--muted);    /* softer tone */
  font-style: italic;     /* optional, looks neat */
}


.chat-input {
  display: flex;
  align-items: flex-end;
  gap: 0.6rem;
  padding: 0.9rem 1.1rem;
  background: var(--bg);
  border-top: var(--card-border-w) solid var(--border);
}


.chat-input textarea {
  flex: 1;
  min-height: 60px;
  max-height: 140px;
  resize: vertical;
  border: 1px solid var(--border);
  border-radius: var(--radius-inner);
  padding: 0.65rem 0.8rem;
  background: var(--card-bg);
  color: var(--text);
}


.chat-input .btn.primary { min-width: 80px; }


/* === Right Column (To-Do) === */
.todo-box {
  position: sticky;
  top: calc(var(--header-h) + 1rem); /* adjust if header height differs */
  padding: 0.8rem 1rem;
  max-height: calc(100dvh - var(--header-h) - 4rem);
  display: flex;
  flex-direction: column;
}


.todo-head h2 {
  margin: 0;
  font-weight: 700;
  font-size: 1.25rem;
  color: var(--text);  /* text color adapts to theme */
}


.task-list {
  list-style: none;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  overflow: auto;
}


.task-item form {
  display: flex;
  align-items: center;
  gap: 0.6rem;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius-inner);
  padding: 0.45rem 0.6rem;
}


.task-title {
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}


.task-item.done .task-title { color: var(--muted); text-decoration: line-through; }


.checkbox {
  width: 1.1rem; height: 1.1rem;
  border-radius: .4rem;
  border: 1px solid var(--border);
  background: var(--card-bg);
  cursor: pointer;
}


.checkbox.checked { background: #22c55e; border-color: #16a34a; }


.add-task {
  display: flex; gap: .5rem; margin-top: .75rem;
}


.add-task input {
  flex: 1;
  border: 1px solid var(--border);
  border-radius: var(--radius-inner);
  padding: 0.5rem 0.6rem;
  background: var(--card-bg);
  color: var(--text);
}
