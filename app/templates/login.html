<!-- templates/login.html -->
{% extends 'base.html' %}
{% block title %}Log In - Project Matrix{% endblock %}
{% block flashes %}{% endblock %}
{% block content %}
<script src="{{ url_for('static', filename='js/auth.js') }}"></script>
<div class="auth-container">
  <div class="auth-card">
    <div id="message-container"></div>
    <h2>Welcome back!</h2>
    <p class="subhead">Access your projects and move forward with confidence.</p>

    <form id="loginForm" action="{{ url_for('auth.login') }}" method="POST" novalidate>
      <!-- Username -->
      <div class="form-group">
        <label class="visually-hidden" for="username">Username</label>
        <input type="text" id="username" name="username"
               placeholder="Username" required autocomplete="username">
      </div>

      <!-- Password -->
      <div class="form-group form-group-relative">
        <label class="visually-hidden" for="password">Password</label>
        <input type="password" id="password" name="password"
               placeholder="Password" required autocomplete="current-password">
        <button type="button" id="toggleLoginPass" class="password-toggle"
                aria-label="Show password">âŠ™</button>
      </div>

      <!-- Submit -->
      <button id="loginSubmit" type="submit" >Log In</button>
    </form>
        {% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    <div class="flash-messages">
      {% for category, message in messages %}
        <div class="alert-custom {{ category }}">
          <span class="alert-text">{{ message }}</span>
          <button class="alert-close" onclick="this.parentElement.classList.add('hidden');">&times;</button>
        </div>
      {% endfor %}
    </div>
  {% endif %}
{% endwith %}

    <p><a href="{{ url_for('auth.register') }}">Don't have an account?</a></p>
  </div>
</div>
{% endblock %}
