{% extends 'base.html' %}

{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Welcome Header -->
    <div class="dashboard-header">
        <h1>Welcome{% if current_user.is_authenticated %}, {{ current_user.username }}{% endif %}!</h1>
        <p class="dashboard-subtitle">Rabbab</p>
    </div>
    
    <!-- Two Column Layout -->
    <div class="dashboard-grid">
        <!-- Left Column: Available Projects -->
        <div class="main-column">
            <div class="section-header">
                <h2>Latest Projects</h2>
                <a href="{{ url_for('project.projects') }}" class="view-all-btn">View All</a>
            </div>
            
            <div class="projects-grid">
                {% for project in projects %}
                    {% with is_creator=(current_user.is_authenticated and project.creator_id == current_user.id) %}
                        {% include 'project_card.html' %}
                    {% endwith %}
                {% else %}
                    <div class="empty-state">
                        <p>No projects available yet.</p>
                        <a href="{{ url_for('project.create_project') }}" class="create-first-btn">Create the First Project</a>
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- Right Column: Sidebar with Stats and Activity -->
        <div class="sidebar-column">
            <!-- Quick Actions -->
            {% if current_user.is_authenticated %}
            <div class="quick-actions-widget">
                <h3>Quick Actions</h3>
                <div class="action-buttons">
                    <a href="{{ url_for('project.create_project') }}" class="action-btn primary">
                        <i class="fas fa-plus"></i> Create Project
                    </a>
                    <a href="{{ url_for('profile.show_profile') }}" class="action-btn secondary">
                        <i class="fas fa-user"></i> Edit Profile
                    </a>
                </div>
            </div>
            
            <!-- Your Recent Projects -->
            {% if user_projects %}
            <div class="recent-projects-widget">
                <h3>Your Recent Projects</h3>
                <div class="mini-project-list">
                    {% for project in user_projects[:3] %}
                    <div class="mini-project-item">
                        <div class="mini-project-info">
                            <span class="mini-project-name">{{ project.name }}</span>
                            <span class="mini-project-sector">{{ project.sector }}</span>
                        </div>
                        <a href="{{ url_for('project.project_applicants', project_id=project.id) }}" class="mini-project-btn">
                            {{ project.applications|length }} applicants
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}