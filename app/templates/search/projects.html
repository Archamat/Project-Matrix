{% extends "base.html" %}

{% block content %}
<div class="projects-container">
    <h2>Search Projects</h2>

    <!-- Search form -->
    <form method="GET" action="{{ url_for('search.search_projects') }}" class="mb-3">
        <input class="form-control mb-2" name="q" value="{{ q or '' }}" placeholder="Search by name or descriptionâ€¦">
        <button class="btn btn-primary">Search</button>
    </form>

    <!-- Project results -->
    <div class="project-grid">
        {% for project in projects %}
            {% with is_creator=(current_user.is_authenticated and project.creator_id == current_user.id) %}
                {% include 'project_card.html' %}
            {% endwith %}
        {% else %}
            <p class="text-muted">No projects found.</p>
        {% endfor %}
    </div>

    <!-- Pagination -->
    {% if pagination.pages > 1 %}
    <nav class="mt-3">
        <ul class="pagination">
            {% if pagination.has_prev %}
                <li class="page-item"><a class="page-link" href="{{ url_for('search.search_projects', q=q, page=pagination.prev_num) }}">&laquo;</a></li>
            {% endif %}
            <li class="page-item disabled"><span class="page-link">Page {{ pagination.page }} / {{ pagination.pages }}</span></li>
            {% if pagination.has_next %}
                <li class="page-item"><a class="page-link" href="{{ url_for('search.search_projects', q=q, page=pagination.next_num) }}">&raquo;</a></li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
</div>
{% endblock %}
